<html>
	<head>
		<title>
			Assignment 2
		</title>
		<style>
			.container {
				width: 100%;
				display: flex;
			}
			.half {
				border: 1px solid #eee;
				width: 50%;
				padding: 10px;
			}
			.horizontal {
				padding-bottom: 10px;
			}
			.heading {
				font-size: 25px;
				font-family: arial;
				font-weight: 600;
				text-align: center;
				padding-bottom: 30px;
			}
			sup {
				color: red;
			}
			.note {
				font-size: 12px;
				padding-top: 30px;
			}
		</style>
		<script>
			function addObject(object) {
				localStorage.setItem(localStorage.length, JSON.stringify(object));
			}
			function getObjects() {
				let length = localStorage.length;
				var arr = [];
				for(let i=0; i<length; i++) {
					arr.push(JSON.parse(localStorage.getItem(i)));
				}
				console.log("Array is ", arr);
				return arr;
			}
			function validations() {
				let name = document.getElementById('name').value;
				let email = document.getElementById('email').value;
				let mobile = document.getElementById('mobile').value;
				
				for(let i=0; i<name.length; i++) {
					let valid = (name[i]>='a' && name[i] <='z') || (name[i]>='A' && name[i]<='Z') || (name[i] == ' ');
					if(!valid) {
						alert("Invalid Name");
						return false;
					}
				}
				
				var obj = {
					'name': name,
					'email': email,
					'mobile': mobile
				};
				
				addObject(obj);
				addRow(document.getElementById('table'), false, [name, email, mobile] );
				return true;
			}
			
			
			
			
			function createTable() {
				setTimeout( () => {
					var container = document.getElementById("container");
					var table = document.createElement("table");
					table.setAttribute('id', 'table');
					container.appendChild(table);
					console.log(container);
					addRow(table, true, ["Name", "Email", "Mobile No."]);
					getObjects().forEach(obj => {
						addRow(table,false,[obj.name, obj.email, obj.mobile]);
					});
				});
			}
			
			function addRow(table, header, columnValues) {
				var headerRow = document.createElement("tr");
				var column = header ? "th": "td";
				
				columnValues.forEach(value => {
					const th = document.createElement(column);
					const textNode = document.createTextNode(value);
					th.appendChild(textNode);
					th.setAttribute("style", "border: 1px solid #eee; text-align: center; padding: 5px;"); // dynamic CSS	
					headerRow.appendChild(th);
				});
				
				table.appendChild(headerRow);
			}

			(()=> {    	// self-invoked function
				createTable();
			})();
		</script>
	</head>
	<body>
		<div class = "heading">
			Employee Basic Details Store
		</div>
		<div class = "container">
			<div class = "half">
				<form action = "#" onsubmit = "return validations()">
				
					<div class = "horizontal">
						<label for = "name">
							Name<sup>*</sup>:
						</label>
						<input type = "text" id = "name" name = "name" required>
						<br/>
					</div>
					
					<div class = "horizontal">
						<label for = "email">
							Email<sup>*</sup>:
						</label>
						<input type = "email" id = "email" name = "email" required>
						<br/>
					</div>
					
					<div class = "horizontal">
						<label for = "mobile">
							Mobile No:
						</label>
						<input type = "number" id = "mobile" name = "mobile">
						<br/>
					</div>
					
					<input type = "submit">
					
				</form>
			</div>
			<div class = "half" id = "container">
			</div>
		</div>
		<div class = "note">
			<b>Note</b> - No bootstrap lectures have been uploaded yet. Webpage is made without using bootstrap and hence, not responsive.
		</div>
	</body>
</html>